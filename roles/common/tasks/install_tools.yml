---
  - name: install_tools | create all the tools folders
    sudo: yes
    sudo_user: jenkins
    file: path={{item}} state=directory owner=jenkins
    with_items:
      - "{{tools_home}}/ant"
      - "{{tools_home}}/maven"
      - "{{tools_home}}/jdk64_31"
      - "{{tools_home}}/jdk7"
      - "{{tools_home}}/forrest"
      - "{{jenkins_home}}/.m2/"
      - "{{jenkins_home}}/.ssh/"

  - name: install_tools | Download Maven
    sudo: yes
    sudo_user: jenkins
    get_url: url={{maven_url}} dest={{tools_home}}/maven/maven.tar.gz mode=0744

  - name: install_tools | Download Ant
    sudo: yes
    sudo_user: jenkins
    get_url: url={{ant_url}} dest={{tools_home}}/ant/ant.tar.gz mode=0744

  - name: install_tools | Download Forrest
    sudo: yes
    sudo_user: jenkins
    get_url: url={{forrest_url}} dest={{forrest_home}}/forrest.tar.gz mode=744

  - name: install_tools | Untar Maven
    sudo: yes
    sudo_user: jenkins
    unarchive: copy=no src={{tools_home}}/maven/maven.tar.gz dest={{tools_home}}/maven

  - name: install_tools | Untar Ant
    sudo: yes
    sudo_user: jenkins
    unarchive: copy=no src={{tools_home}}/ant/ant.tar.gz dest={{tools_home}}/ant

  - name: install_tools | Untar Forrest
    sudo: yes
    sudo_user: jenkins
    unarchive: copy=no src={{forrest_home}}/forrest.tar.gz dest={{tools_home}}/forrest

  - name: install_tools | symlink Maven -> latest
    sudo: yes
    sudo_user: jenkins
    file: src=apache-maven-{{ mvn_version }} dest={{tools_home}}/maven/latest state=link

  - name: install_tools | symlink Ant -> latest
    sudo: yes
    sudo_user: jenkins
    file: src=apache-ant-1.9.4 dest={{tools_home}}/ant/latest state=link

  - name: install_tools | symlink Forrest -> latest
    sudo: yes
    sudo_user: jenkins
    file: src=apache-forrest-{{forrest_version}} dest={{forrest_home}}/latest state=link
